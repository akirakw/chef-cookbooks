<?xml version="1.0"?>
<?xml-stylesheet type="text/xsl"  href="configuration.xsl"?>

<configuration>

  <property>
    <name>flume.master.servers</name>
    <value><%= @flumemasters.map { |fm| fm[:hostname] }.join(',') %></value>
  </property>

<% if @serverid -%>

  <property>
    <name>flume.master.serverid</name>
    <value><%= @serverid %></value>
  </property>

<% end -%>

<% if @zookeepers.size > 0 -%>

  <property>
    <name>flume.master.zk.use.external</name>
    <value>true</value>
  </property>

  <property>
    <name>flume.master.zk.servers</name>
    <value><%= @zookeepers.map { |zk| "#{zk[:hostname]}:2181" }.join(',') %></value>
  </property>

<% end -%>

</configuration>
